"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _ReactBootstrap=ReactBootstrap,Alert=_ReactBootstrap.Alert,Button=_ReactBootstrap.Button,ControlLabel=_ReactBootstrap.ControlLabel,FormControl=_ReactBootstrap.FormControl,FormGroup=_ReactBootstrap.FormGroup,ListGroup=_ReactBootstrap.ListGroup,ListGroupItem=_ReactBootstrap.ListGroupItem,Modal=_ReactBootstrap.Modal,Tab=_ReactBootstrap.Tab,Tabs=_ReactBootstrap.Tabs,Well=_ReactBootstrap.Well,NewRecipe=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this));return n.extractWords=function(e){return e.split(",").map(function(e){return t.capitalizePhrase(e)}).filter(function(e){return e.length})},n.cancelEdit=function(){setTimeout(function(){return n.setState({newName:"",newIngredients:"",editing:null})},500),n.props.onExitEditing()},n.saveRecipe=function(){if(n.validateName()||n.validateIngredients()||!n.state.newName.trim().length||!n.state.newIngredients.trim().length)return n.props.onAlert();var e=t.capitalizePhrase(n.state.newName),a=JSON.parse(localStorage.getItem("rvrvrv-recipes"))||{};return Object.prototype.hasOwnProperty.call(a,e)&&!n.state.editing?n.props.onAlert("A recipe for "+e+" already exists."):(a[e]=n.extractWords(n.state.newIngredients),localStorage.setItem("rvrvrv-recipes",JSON.stringify(a)),n.props.onSave(),n.state.editing&&n.props.onExitEditing(),n.props.onChangeTab(e),n.props.onAlert("Your recipe for "+e+" has been "+(n.state.editing?"updated":"saved")+".","success"),n.setState({newName:"",newIngredients:"",editing:null}))},n.handleNameChange=function(e){return n.setState({newName:e.target.value})},n.handleIngredientsChange=function(e){return n.setState({newIngredients:e.target.value})},n.state={newName:"",newIngredients:"",editing:null},n}return _inherits(t,e),t.capitalizePhrase=function(e){var t=/(and|the|tsp|oz)/gi;return e.trim().split(" ").map(function(e,n){return 0===n&&e||e.length>2&&!t.test(e)?e=e[0].toUpperCase()+e.slice(1):e}).join(" ")},t.validInput=function(e){var t=/[a-z]/gi,n=/[<>{}`\\]/gi;return!e.length||t.test(e)&&!n.test(e)},t.prototype.componentWillReceiveProps=function(e){e.editing&&this.setState({newName:e.editing.name,newIngredients:e.editing.ingredients.join(", "),editing:!0})},t.prototype.validateName=function(){var e=this.state.newName;return!t.validInput(e)||e.length>80?"error":null},t.prototype.validateIngredients=function(){var e=this.state.newIngredients;return!t.validInput(e)||e.length>500||e.length>10&&e.includes(" ")&&!e.includes(",")?"error":null},t.prototype.render=function(){return React.createElement("div",null,React.createElement("form",{style:{marginTop:10}},React.createElement(FormGroup,{controlId:"name",validationState:this.validateName()},React.createElement(ControlLabel,null,"Recipe for:"),React.createElement(FormControl,{placeholder:"Lasagna",value:this.state.newName,onChange:this.handleNameChange})),React.createElement(FormGroup,{controlId:"ingredients",validationState:this.validateIngredients()},React.createElement(ControlLabel,null,"Ingredients (separated by commas):"),React.createElement(FormControl,{componentClass:"textarea",placeholder:"Pasta, Ricotta Cheese, Garlic...",value:this.state.newIngredients,onChange:this.handleIngredientsChange})),React.createElement(Button,{bsStyle:"success",onClick:this.saveRecipe},"Save")," ",this.props.editing&&React.createElement(Button,{onClick:this.cancelEdit},"Cancel Changes")))},t}(React.Component),RecipeBody=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this));return n.openModal=function(e){var t;return n.setState((t={},t[e.target.value]=!0,t))},n.closeModal=function(e){var t;return n.setState((t={},t[e.target.value]=!1,t))},n.editRecipe=function(){return n.props.onEdit(n.props.name,n.props.ingredients)},n.deleteRecipe=function(){var e=JSON.parse(localStorage.getItem("rvrvrv-recipes"));delete e[n.props.name],localStorage.setItem("rvrvrv-recipes",JSON.stringify(e)),n.props.onSave(),n.closeModal({target:{value:"deleteModal"}}),n.props.onAlert("The recipe for "+n.props.name+" has been deleted.","success"),n.props.onChangeTab("add-recipe")},n.state={deleteModal:!1},n}return _inherits(t,e),t.prototype.render=function(){var e=this.props.ingredients.map(function(e){return React.createElement(ListGroupItem,{href:"https://google.com/search?q="+e,target:"_blank"},e)});return React.createElement("div",null,React.createElement("h3",{className:"text-center"},this.props.name),React.createElement(ListGroup,null,e),React.createElement("div",{className:"text-center"},React.createElement(Button,{onClick:this.editRecipe},"Edit Recipe")," ",React.createElement(Button,{onClick:this.openModal,value:"deleteModal"},"Remove Recipe")),React.createElement(Modal,{show:this.state.deleteModal,onHide:this.closeModal},React.createElement(Modal.Header,null,React.createElement(Modal.Title,{id:"contained-modal-title"},"Remove ",this.props.name)),React.createElement(Modal.Body,null,"Are you sure you want to remove the recipe for ",this.props.name,"?"),React.createElement(Modal.Footer,null,React.createElement(Button,{onClick:this.deleteRecipe,value:"deleteModal",bsStyle:"danger"},"Yes, remove it"),React.createElement(Button,{onClick:this.closeModal,value:"deleteModal"},"No"))))},t}(React.Component),RecipeBox=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this));return n.handleSelect=function(e){return n.setState({key:e})},n.handleEdit=function(e,t){n.setState({editing:{name:e,ingredients:t}}),n.handleSelect("add-recipe")},n.handleExitEditing=function(){n.handleSelect(n.state.editing.name),n.setState({editing:null})},n.showAlert=function(){var e=arguments.length<=0||void 0===arguments[0]?"Please enter a valid recipe name and ingredients.":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"danger":arguments[1];n.setState({alert:React.createElement(Alert,{bsStyle:t},React.createElement("strong",null,"danger"===t&&"Oops!"||"success"===t&&"Success!"," "),e)}),setTimeout(function(){return n.setState({alert:null})},3e3)},n.recipeTabs=function(){return Object.keys(n.props.recipes).map(function(e,t){return React.createElement(Tab,{eventKey:e,title:e,disabled:!!n.state.editing},React.createElement(RecipeBody,{name:e,ingredients:n.props.recipes[e],onAlert:n.showAlert,onEdit:n.handleEdit,onChangeTab:n.handleSelect,onSave:n.props.onSave}))})},n.state={alert:null,editing:null,key:"add-recipe"},n}return _inherits(t,e),t.prototype.render=function(){return React.createElement("div",null,React.createElement(Well,null,React.createElement(Tabs,{activeKey:this.state.key,onSelect:this.handleSelect},this.recipeTabs(),React.createElement(Tab,{eventKey:"add-recipe",title:this.state.editing?"Edit "+this.state.editing.name:"Add a Recipe"},React.createElement(NewRecipe,{onAlert:this.showAlert,onChangeTab:this.handleSelect,onSave:this.props.onSave,onExitEditing:this.handleExitEditing,editing:this.state.editing})))),this.state.alert)},t}(React.Component),RecipeBoxContainer=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this));n.updateRecipes=function(){return n.setState({recipes:JSON.parse(localStorage.getItem("rvrvrv-recipes"))})};var a={"Green Smoothie":["1 Handful Spinach","1 Frozen Banana","½ Small Avocado","¼ Cup Unsweetened Almond Milk","½ tsp. Cinnamon"],"Hot Cocoa":["2 Tbsp. Unsweetened Cocoa Powder","1½ Tbsp. Sugar","Pinch of Salt","1 Cup of Milk","¼ tsp. Vanilla Extract"]};return localStorage.getItem("rvrvrv-recipes")&&"{}"!==localStorage.getItem("rvrvrv-recipes")||localStorage.setItem("rvrvrv-recipes",JSON.stringify(a)),n.state={recipes:JSON.parse(localStorage.getItem("rvrvrv-recipes"))},n}return _inherits(t,e),t.prototype.render=function(){return React.createElement(RecipeBox,{recipes:this.state.recipes,onSave:this.updateRecipes})},t}(React.Component),App=function(){return React.createElement("div",{className:"container"},React.createElement("h1",{className:"text-center text-success"},React.createElement("i",{className:"fa fa-cutlery","aria-hidden":"true"}),React.createElement("br",null),"Recipe Box"),React.createElement(RecipeBoxContainer,null))};ReactDOM.render(React.createElement(App,null),document.getElementById("app"));
