'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _ReactBootstrap=ReactBootstrap,Alert=_ReactBootstrap.Alert,Button=_ReactBootstrap.Button,ControlLabel=_ReactBootstrap.ControlLabel,FormControl=_ReactBootstrap.FormControl,FormGroup=_ReactBootstrap.FormGroup,ListGroup=_ReactBootstrap.ListGroup,ListGroupItem=_ReactBootstrap.ListGroupItem,Modal=_ReactBootstrap.Modal,Tab=_ReactBootstrap.Tab,Tabs=_ReactBootstrap.Tabs,Well=_ReactBootstrap.Well,NewRecipe=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.extractWords=function(d){return d.split(',').map(function(f){return b.capitalizePhrase(f)}).filter(function(f){return f.length})},c.cancelEdit=function(){setTimeout(function(){return c.setState({newName:'',newIngredients:'',editing:null})},500),c.props.onExitEditing()},c.saveRecipe=function(){if(c.validateName()||c.validateIngredients()||!c.state.newName.trim().length||!c.state.newIngredients.trim().length)return c.props.onAlert();var d=b.capitalizePhrase(c.state.newName),f=JSON.parse(localStorage.getItem('rvrvrv-recipes'))||{};return Object.prototype.hasOwnProperty.call(f,d)&&!c.state.editing?c.props.onAlert('A recipe for '+d+' already exists.'):(f[d]=c.extractWords(c.state.newIngredients),localStorage.setItem('rvrvrv-recipes',JSON.stringify(f)),c.props.onSave(),c.state.editing&&c.props.onExitEditing(),c.props.onChangeTab(d),c.props.onAlert('Your recipe for '+d+' has been '+(c.state.editing?'updated':'saved')+'.','success'),c.setState({newName:'',newIngredients:'',editing:null}))},c.handleNameChange=function(d){return c.setState({newName:d.target.value})},c.handleIngredientsChange=function(d){return c.setState({newIngredients:d.target.value})},c.state={newName:'',newIngredients:'',editing:null},c}return _inherits(b,a),_createClass(b,null,[{key:'capitalizePhrase',value:function capitalizePhrase(c){var d=/(and|the|tsp|oz)/gi;return c.trim().split(' ').map(function(f,g){return 0===g&&f||2<f.length&&!d.test(f)?f=f[0].toUpperCase()+f.slice(1):f}).join(' ')}},{key:'validInput',value:function validInput(c){var d=/[a-z]/gi,f=/[<>{}`\\]/gi;return!c.length||d.test(c)&&!f.test(c)}}]),_createClass(b,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(c){c.editing&&this.setState({newName:c.editing.name,newIngredients:c.editing.ingredients.join(', '),editing:!0})}},{key:'validateName',value:function validateName(){var c=this.state.newName;return!b.validInput(c)||80<c.length?'error':null}},{key:'validateIngredients',value:function validateIngredients(){var c=this.state.newIngredients;return!b.validInput(c)||500<c.length||10<c.length&&c.includes(' ')&&!c.includes(',')?'error':null}},{key:'render',value:function render(){return React.createElement('div',null,React.createElement('form',{style:{marginTop:10}},React.createElement(FormGroup,{controlId:'name',validationState:this.validateName()},React.createElement(ControlLabel,null,'Recipe for:'),React.createElement(FormControl,{placeholder:'Lasagna',value:this.state.newName,onChange:this.handleNameChange,style:{backgroundColor:'#222',color:'#ded'}})),React.createElement(FormGroup,{controlId:'ingredients',validationState:this.validateIngredients()},React.createElement(ControlLabel,null,'Ingredients (separated by commas):'),React.createElement(FormControl,{componentClass:'textarea',placeholder:'Pasta, Ricotta Cheese, Garlic...',value:this.state.newIngredients,onChange:this.handleIngredientsChange,style:{backgroundColor:'#222',color:'#ded',resize:'none'}})),React.createElement(Button,{bsStyle:'success',onClick:this.saveRecipe},'Save'),' ',this.props.editing&&React.createElement(Button,{onClick:this.cancelEdit},'Cancel Changes')))}}]),b}(React.Component),RecipeBody=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.openModal=function(d){return c.setState(_defineProperty({},d.target.value,!0))},c.closeModal=function(d){return c.setState(_defineProperty({},d.target.value,!1))},c.editRecipe=function(){return c.props.onEdit(c.props.name,c.props.ingredients)},c.deleteRecipe=function(){var d=JSON.parse(localStorage.getItem('rvrvrv-recipes'));delete d[c.props.name],localStorage.setItem('rvrvrv-recipes',JSON.stringify(d)),c.props.onSave(),c.closeModal({target:{value:'deleteModal'}}),c.props.onAlert('The recipe for '+c.props.name+' has been deleted.','success'),c.props.onChangeTab('add-recipe')},c.state={deleteModal:!1},c}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){var c=this.props.ingredients.map(function(d){return React.createElement(ListGroupItem,{href:'https://google.com/search?q='+d,target:'_blank'},d)});return React.createElement('div',null,React.createElement('h3',{className:'text-center'},this.props.name),React.createElement(ListGroup,null,c),React.createElement('div',{className:'text-center'},React.createElement(Button,{onClick:this.editRecipe},'Edit Recipe'),' ',React.createElement(Button,{onClick:this.openModal,value:'deleteModal'},'Remove Recipe')),React.createElement(Modal,{show:this.state.deleteModal,onHide:this.closeModal},React.createElement(Modal.Header,null,React.createElement(Modal.Title,{id:'contained-modal-title'},'Remove ',this.props.name)),React.createElement(Modal.Body,null,'Are you sure you want to remove the recipe for ',this.props.name,'?'),React.createElement(Modal.Footer,null,React.createElement(Button,{onClick:this.deleteRecipe,value:'deleteModal',bsStyle:'danger'},'Yes, remove it'),React.createElement(Button,{onClick:this.closeModal,value:'deleteModal'},'No'))))}}]),b}(React.Component),RecipeBox=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.handleSelect=function(d){return c.setState({key:d})},c.handleEdit=function(d,f){c.setState({editing:{name:d,ingredients:f}}),c.handleSelect('add-recipe')},c.handleExitEditing=function(){c.handleSelect(c.state.editing.name),c.setState({editing:null})},c.showAlert=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'Please enter a valid recipe name and ingredients.',f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'danger';c.setState({alert:React.createElement(Alert,{bsStyle:f},React.createElement('strong',null,'danger'===f&&'Oops!'||'success'===f&&'Success!',' '),d)}),setTimeout(function(){return c.setState({alert:null})},3e3)},c.recipeTabs=function(){return Object.keys(c.props.recipes).map(function(d){return React.createElement(Tab,{eventKey:d,title:d,disabled:!!c.state.editing},React.createElement(RecipeBody,{name:d,ingredients:c.props.recipes[d],onAlert:c.showAlert,onEdit:c.handleEdit,onChangeTab:c.handleSelect,onSave:c.props.onSave}))})},c.state={alert:null,editing:null,key:'add-recipe'},c}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){return React.createElement('div',null,React.createElement(Well,null,React.createElement(Tabs,{activeKey:this.state.key,onSelect:this.handleSelect},this.recipeTabs(),React.createElement(Tab,{eventKey:'add-recipe',title:this.state.editing?'Edit '+this.state.editing.name:'Add a Recipe'},React.createElement(NewRecipe,{onAlert:this.showAlert,onChangeTab:this.handleSelect,onSave:this.props.onSave,onExitEditing:this.handleExitEditing,editing:this.state.editing})))),this.state.alert)}}]),b}(React.Component),RecipeBoxContainer=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c.updateRecipes=function(){return c.setState({recipes:JSON.parse(localStorage.getItem('rvrvrv-recipes'))})};return localStorage.getItem('rvrvrv-recipes')&&'{}'!==localStorage.getItem('rvrvrv-recipes')||localStorage.setItem('rvrvrv-recipes',JSON.stringify({'Green Smoothie':['1 Handful Spinach','1 Frozen Banana','\xBD Small Avocado','\xBC Cup Unsweetened Almond Milk','\xBD tsp. Cinnamon'],'Hot Cocoa':['2 Tbsp. Unsweetened Cocoa Powder','1\xBD Tbsp. Sugar','Pinch of Salt','1 Cup of Milk','\xBC tsp. Vanilla Extract']})),c.state={recipes:JSON.parse(localStorage.getItem('rvrvrv-recipes'))},c}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){return React.createElement(RecipeBox,{recipes:this.state.recipes,onSave:this.updateRecipes})}}]),b}(React.Component),App=function(){return React.createElement('div',{className:'container'},React.createElement('h1',{className:'text-center text-success'},React.createElement('i',{className:'fa fa-cutlery','aria-hidden':'true'}),React.createElement('br',null),'Recipe Box'),React.createElement(RecipeBoxContainer,null))};ReactDOM.render(React.createElement(App,null),document.getElementById('app'));